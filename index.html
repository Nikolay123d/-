<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–î–æ–ø–æ–º–æ–≥–∞ —É–∫—Ä–∞—ó–Ω—Ü—è–º —É –ü—Ä–∞–∑—ñ ‚Äì –∂–∏—Ç–ª–æ, —Ä–æ–±–æ—Ç–∞, –∫–∞—Ä—Ç–∞, —á–∞—Ç</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Comfortaa&display=swap" rel="stylesheet" />

<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  crossorigin=""
/>

<style>
  :root {
    --accent: #005bbb;
    --accent-light: #ffd500;
    --bg-chat-overlay: rgba(0, 0, 0, 0.6);
  }

  body {
    margin: 0;
    font-family: 'Comfortaa', cursive;
    background: url('https://i.ibb.co/fbpjfnm/Prague.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    background: var(--accent);
    color: white;
    padding: 15px 20px;
    text-align: center;
    font-size: 1.6rem;
    font-weight: bold;
  }

  main {
    flex: 1;
    padding: 20px;
    max-width: 1000px;
    margin: 0 auto 30px;
    background: rgba(0, 0, 0, 0.55);
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(0,0,0,0.7);
  }

  h2, h3 {
    color: var(--accent-light);
  }

  /* --- –ö–∞—Ä—Ç–∞ --- */
  #map {
    height: 400px;
    border-radius: 12px;
    margin: 20px 0;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
  }

  nav.filter-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  nav.filter-buttons button {
    background: var(--accent);
    border: none;
    padding: 8px 16px;
    color: var(--accent-light);
    font-weight: 700;
    cursor: pointer;
    border-radius: 30px;
    transition: background-color 0.3s ease;
  }
  nav.filter-buttons button.active,
  nav.filter-buttons button:hover {
    background: var(--accent-light);
    color: var(--accent);
  }

  /* --- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è --- */
  #info-section ul {
    list-style: none;
    padding-left: 0;
    margin-bottom: 30px;
  }
  #info-section li {
    margin-bottom: 15px;
    background: rgba(255 255 255 / 0.1);
    padding: 15px;
    border-radius: 10px;
    box-shadow: inset 0 0 10px rgba(255 255 255 / 0.15);
  }
  #info-section li img {
    max-width: 100%;
    border-radius: 10px;
    margin-top: 8px;
    box-shadow: 0 0 8px rgba(0,0,0,0.6);
  }
  #info-section a {
    color: var(--accent-light);
    text-decoration: none;
    font-weight: 700;
  }
  #info-section a:hover {
    text-decoration: underline;
  }

  /* --- –ß–∞—Ç --- */
  .chat-container {
    max-width: 700px;
    margin: 0 auto;
    background: var(--bg-chat-overlay);
    border-radius: 15px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    backdrop-filter: blur(6px);
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
  }

  .chat-header {
    font-size: 1.25rem;
    margin-bottom: 15px;
    color: var(--accent-light);
    text-align: center;
  }

  #messages {
    flex: 1;
    overflow-y: auto;
    max-height: 350px;
    padding-right: 10px;
    margin-bottom: 15px;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-light) transparent;
  }
  #messages::-webkit-scrollbar {
    width: 8px;
  }
  #messages::-webkit-scrollbar-thumb {
    background-color: var(--accent-light);
    border-radius: 10px;
  }

  .message {
    background: #fff;
    color: #000;
    border-radius: 12px;
    padding: 10px 14px;
    margin-bottom: 10px;
    max-width: 75%;
    word-wrap: break-word;
    box-shadow: 0 1px 4px rgba(0,0,0,0.2);
  }
  .message.sent {
    background: #bee5d3;
    align-self: flex-end;
  }
  .message img {
    max-width: 100%;
    border-radius: 10px;
    margin-top: 6px;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
  }

  .input-area {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .input-area input[type="text"] {
    flex: 1;
    padding: 10px 16px;
    border-radius: 25px;
    border: none;
    font-family: 'Comfortaa', cursive;
    font-size: 1rem;
    outline: none;
  }

  .input-area input[type="file"] {
    display: none;
  }

  .photo-label {
    cursor: pointer;
    font-size: 1.6rem;
    user-select: none;
  }

  .input-area button {
    padding: 10px 20px;
    background: var(--accent-light);
    border: none;
    border-radius: 25px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
    font-family: 'Comfortaa', cursive;
  }
  .input-area button:hover {
    background: var(--accent);
    color: var(--accent-light);
  }

  footer {
    text-align: center;
    padding: 10px;
    background: var(--accent);
    font-size: 0.9rem;
  }

  /* –ê–¥–∞–ø—Ç–∏–≤ */
  @media (max-width: 768px) {
    main {
      padding: 15px 10px;
      max-width: 100%;
      margin-bottom: 20px;
    }

    #map {
      height: 300px;
    }

    .chat-container {
      max-width: 100%;
      padding: 15px;
    }

    .input-area input[type="text"] {
      font-size: 0.9rem;
    }
  }
</style>
</head>
<body>

<header>–î–æ–ø–æ–º–æ–≥–∞ —É–∫—Ä–∞—ó–Ω—Ü—è–º —É –ü—Ä–∞–∑—ñ</header>

<main>

  <section id="info-section" aria-label="–ö–æ—Ä–∏—Å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è">
    <h2>–ö–æ—Ä–∏—Å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∏</h2>

    <h3>–ú–µ–¥–∏—á–Ω—ñ –∑–∞–∫–ª–∞–¥–∏</h3>
    <ul>
      <li>
        <b>–õ—ñ–∫–∞—Ä–Ω—è –ú–æ—Ç–æ–ª</b> ‚Äî V √övalu 84, Praha 5<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 224 431 111<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 24/7<br/>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/FN_Motol_logo.svg/1200px-FN_Motol_logo.svg.png" alt="–õ—ñ–∫–∞—Ä–Ω—è –ú–æ—Ç–æ–ª" />
      </li>
      <li>
        <b>–ü–æ–ª—ñ–∫–ª—ñ–Ω—ñ–∫–∞ –ü—Ä–∞–≥–∞ 1</b> ‚Äî Jungmannova 35, Praha 1<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 123 456 789<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 9:00‚Äì17:00<br/>
        <img src="https://upload.wikimedia.org/wikipedia/commons/9/97/Polyclinic_in_Prague_1.JPG" alt="–ü–æ–ª—ñ–∫–ª—ñ–Ω—ñ–∫–∞ –ü—Ä–∞–≥–∞ 1" />
      </li>
      <li>
        <b>–ê–ø—Ç–µ–∫–∞ ¬´–°–≤–æ–±–æ–¥–∞¬ª</b> ‚Äî Karlovo n√°mƒõst√≠ 14, Praha 2<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 987 654 321<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 8:00‚Äì20:00<br/>
        <img src="https://cdn.pixabay.com/photo/2018/05/02/20/05/pharmacy-3367040_960_720.jpg" alt="–ê–ø—Ç–µ–∫–∞ –°–≤–æ–±–æ–¥–∞" />
      </li>
    </ul>

    <h3>–°–æ—Ü—ñ–∞–ª—å–Ω—ñ —Å–ª—É–∂–±–∏ —Ç–∞ –≤–æ–ª–æ–Ω—Ç–µ—Ä–∏</h3>
    <ul>
      <li>
        <b>OAMP –ü—Ä–∞–≥–∞ 1</b> ‚Äî Jungmannova 35, Praha 1<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 123 456 789<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 9:00‚Äì17:00<br/>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/OAMP_Logo.svg/1200px-OAMP_Logo.svg.png" alt="OAMP –ü—Ä–∞–≥–∞ 1" />
      </li>
      <li>
        <b>–í–æ–ª–æ–Ω—Ç–µ—Ä—Å—å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´Pomoc¬ª</b> ‚Äî Vinohradsk√° 52, Praha 3<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 555 666 777<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 10:00‚Äì18:00<br/>
        <img src="https://cdn.pixabay.com/photo/2017/06/11/18/56/volunteers-2399516_960_720.jpg" alt="–í–æ–ª–æ–Ω—Ç–µ—Ä—Å—å–∫–∏–π —Ü–µ–Ω—Ç—Ä –ü–æ–º–æ—á" />
      </li>
    </ul>

    <h3>–Æ—Ä–∏–¥–∏—á–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞</h3>
    <ul>
      <li>
        <b>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è ¬´Pravda¬ª</b> ‚Äî N√°rodn√≠ 10, Praha 1<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 555 123 456<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 9:00‚Äì18:00<br/>
        <img src="https://cdn.pixabay.com/photo/2016/08/25/07/44/law-1619783_960_720.jpg" alt="–Æ—Ä–∏–¥–∏—á–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞" />
      </li>
      <li>
        <b>–¶–µ–Ω—Ç—Ä –ø—Ä–∞–≤–æ–≤–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏</b> ‚Äî Jungmannova 35, Praha 1<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 555 654 321<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 9:00‚Äì17:00<br/>
        <img src="https://cdn.pixabay.com/photo/2017/01/29/11/36/scales-2017796_960_720.jpg" alt="–¶–µ–Ω—Ç—Ä –ø—Ä–∞–≤–æ–≤–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏" />
      </li>
    </ul>

    <h3>–ú–∞–≥–∞–∑–∏–Ω–∏ —Ç–∞ –∫—É—Ä—Å–∏</h3>
    <ul>
      <li>
        <b>–ú–∞–≥–∞–∑–∏–Ω –¥–ª—è –º—ñ–≥—Ä–∞–Ω—Ç—ñ–≤ ¬´Pomoc¬ª</b> ‚Äî Karlovo n√°m. 23, Praha 2<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 987 654 321<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 10:00‚Äì20:00<br/>
        <img src="https://cdn.pixabay.com/photo/2016/03/26/22/22/supermarket-1284423_960_720.jpg" alt="–ú–∞–≥–∞–∑–∏–Ω –¥–ª—è –º—ñ–≥—Ä–∞–Ω—Ç—ñ–≤" />
      </li>
      <li>
        <b>–ö—É—Ä—Å–∏ —á–µ—Å—å–∫–æ—ó –º–æ–≤–∏ ¬´ƒåesky snadno¬ª</b> ‚Äî Vodiƒçkova 14, Praha 1<br/>
        –¢–µ–ª–µ—Ñ–æ–Ω: +420 222 333 444<br/>
        –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏: 9:00‚Äì19:00<br/>
        <img src="https://cdn.pixabay.com/photo/2016/01/19/17/46/classroom-1149147_960_720.jpg" alt="–ö—É—Ä—Å–∏ —á–µ—Å—å–∫–æ—ó –º–æ–≤–∏" />
      </li>
    </ul>
  </section>

  <section aria-label="–ö–∞—Ä—Ç–∞ –∑ –≤–∞–∂–ª–∏–≤–∏–º–∏ —Ç–æ—á–∫–∞–º–∏">
    <h2>–ö–∞—Ä—Ç–∞ –∑ –≤–∞–∂–ª–∏–≤–∏–º–∏ —Ç–æ—á–∫–∞–º–∏</h2>
    <nav class="filter-buttons" aria-label="–§—ñ–ª—å—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–∞ –∫–∞—Ä—Ç—ñ">
      <button data-filter="all" class="active" aria-pressed="true">–í—Å—ñ</button>
      <button data-filter="medicine" aria-pressed="false">–ú–µ–¥–∏—Ü–∏–Ω–∞</button>
      <button data-filter="social" aria-pressed="false">–°–æ—Ü—Å–ª—É–∂–±–∏</button>
      <button data-filter="shops" aria-pressed="false">–ú–∞–≥–∞–∑–∏–Ω–∏</button>
      <button data-filter="law" aria-pressed="false">–Æ—Ä–∏–¥–∏—á–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞</button>
    </nav>
    <div id="map" tabindex="0" aria-label="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –ü—Ä–∞–≥–∏"></div>
  </section>

  <section aria-label="–û–Ω–ª–∞–π–Ω —á–∞—Ç –ü—Ä–∞–≥–∞ –§—É—à–∫–∏" style="margin-top:40px;">
    <div class="chat-container">
      <div class="chat-header">
        –®–∞–Ω–æ–≤–Ω—ñ —É–∫—Ä–∞—ó–Ω—Ü—ñ, —Ü–µ–π —á–∞—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Ç–∞ –æ–±–º—ñ–Ω—É –∫–æ—Ä–∏—Å–Ω–∏–º–∏ –ø–æ—Ä–∞–¥–∞–º–∏ —É –ü—Ä–∞–∑—ñ üá∫üá¶
      </div>
      <div id="messages"></div>
      <div class="input-area">
        <input type="text" id="text-input" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." aria-label="–ü–æ–ª–µ –≤–≤–æ–¥—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è" />
        <label for="file-input" class="photo-label" title="–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ" aria-label="–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ">üì∑</label>
        <input type="file" id="file-input" accept="image/*" aria-label="–í–∏–±—Ä–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" />
        <button id="send-btn" aria-label="–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
      </div>
    </div>
  </section>

</main>

<footer>¬© 2025 –î–æ–ø–æ–º–æ–≥–∞ —É–∫—Ä–∞—ó–Ω—Ü—è–º —É –ü—Ä–∞–∑—ñ</footer>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  crossorigin=""
></script>

<script>
  // --- –ö–ê–†–¢–ê ---
  const map = L.map('map').setView([50.0755, 14.4378], 12); // –¶–µ–Ω—Ç—Ä –ü—Ä–∞–≥–∏

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution:
      '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
  }).addTo(map);

  // –¢–æ—á–∫–∏ (–±–æ–ª—å—à–µ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–µ–µ)
  const points = [
    // –ú–µ–¥–∏—Ü–∏–Ω–∞
    { id: 1, category: 'medicine', name: '–õ—ñ–∫–∞—Ä–Ω—è –ú–æ—Ç–æ–ª', coords: [50.055, 14.383], phone: '+420 224 431 111' },
    { id: 2, category: 'medicine', name: '–ü–æ–ª—ñ–∫–ª—ñ–Ω—ñ–∫–∞ –ü—Ä–∞–≥–∞ 1', coords: [50.085, 14.421], phone: '+420 123 456 789' },
    { id: 3, category: 'medicine', name: '–ê–ø—Ç–µ–∫–∞ ¬´–°–≤–æ–±–æ–¥–∞¬ª', coords: [50.083, 14.417], phone: '+420 987 654 321' },
    { id: 10, category: 'medicine', name: '–ö–ª—ñ–Ω—ñ–∫–∞ ¬´≈Ωitn√°¬ª', coords: [50.086, 14.428], phone: '+420 234 567 890' },
    { id: 11, category: 'medicine', name: '–ú–µ–¥–∏—á–Ω–∏–π —Ü–µ–Ω—Ç—Ä ¬´Praha¬ª', coords: [50.078, 14.420], phone: '+420 345 678 901' },

    // –°–æ—Ü—Å–ª—É–∂–±–∏
    { id: 4, category: 'social', name: 'OAMP –ü—Ä–∞–≥–∞ 1', coords: [50.084, 14.419], phone: '+420 123 456 789' },
    { id: 5, category: 'social', name: '–í–æ–ª–æ–Ω—Ç–µ—Ä—Å—å–∫–∏–π —Ü–µ–Ω—Ç—Ä ¬´Pomoc¬ª', coords: [50.076, 14.437], phone: '+420 555 666 777' },
    { id: 12, category: 'social', name: '–¶–µ–Ω—Ç—Ä –¥–æ–ø–æ–º–æ–≥–∏ –º—ñ–≥—Ä–∞–Ω—Ç–∞–º', coords: [50.075, 14.410], phone: '+420 456 789 012' },

    // –ú–∞–≥–∞–∑–∏–Ω–∏
    { id: 6, category: 'shops', name: '–ú–∞–≥–∞–∑–∏–Ω –¥–ª—è –º—ñ–≥—Ä–∞–Ω—Ç—ñ–≤ ¬´Pomoc¬ª', coords: [50.084, 14.416], phone: '+420 987 654 321' },
    { id: 7, category: 'shops', name: '–ö—Ä–∞–º–Ω–∏—Ü—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤', coords: [50.073, 14.432], phone: '+420 876 543 210' },
    { id: 13, category: 'shops', name: '–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç ¬´Billa¬ª', coords: [50.072, 14.425], phone: '+420 765 432 109' },
    // –Æ—Ä–∏–¥–∏—á–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ (–ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è)
    { id: 8, category: 'law', name: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è ¬´Pravda¬ª', coords: [50.087, 14.420], phone: '+420 555 123 456' },
    { id: 9, category: 'law', name: '–¶–µ–Ω—Ç—Ä –ø—Ä–∞–≤–æ–≤–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏', coords: [50.083, 14.419], phone: '+420 555 654 321' }
  ];

  // –°–æ–∑–¥–∞–µ–º —Å–ª–æ–π –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤
  const markersLayer = L.layerGroup().addTo(map);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–∏–ª—å—Ç—Ä–∞
  function updateMarkers(filter) {
    markersLayer.clearLayers();
    points.forEach((point) => {
      if (filter === 'all' || point.category === filter) {
        const marker = L.marker(point.coords).addTo(markersLayer);
        marker.bindPopup(`<b>${point.name}</b><br>–¢–µ–ª–µ—Ñ–æ–Ω: ${point.phone}`);
      }
    });
  }

  // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ
  updateMarkers('all');

  // –§–∏–ª—å—Ç—Ä –ø–æ –∫–Ω–æ–ø–∫–∞–º
  const filterButtons = document.querySelectorAll('nav.filter-buttons button');
  filterButtons.forEach((btn) => {
    btn.addEventListener('click', () => {
      filterButtons.forEach((b) => {
        b.classList.remove('active');
        b.setAttribute('aria-pressed', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-pressed', 'true');
      updateMarkers(btn.getAttribute('data-filter'));
    });
  });

  // --- –ß–ê–¢ ---

  const messagesContainer = document.getElementById('messages');
  const textInput = document.getElementById('text-input');
  const sendBtn = document.getElementById('send-btn');
  const fileInput = document.getElementById('file-input');

  // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ localStorage
  let messages = JSON.parse(localStorage.getItem('chatMessages')) || [];

  // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
  function renderMessages() {
    messagesContainer.innerHTML = '';
    messages.forEach(msg => {
      const msgDiv = document.createElement('div');
      msgDiv.classList.add('message', 'sent');
      if (msg.type === 'text') {
        msgDiv.textContent = msg.content;
      } else if (msg.type === 'image') {
        const img = document.createElement('img');
        img.src = msg.content;
        img.alt = '–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É —á–∞—Ç—ñ';
        msgDiv.appendChild(img);
      }
      messagesContainer.appendChild(msgDiv);
    });
    // –°–∫—Ä–æ–ª–ª–∏–º –≤–Ω–∏–∑
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }

  renderMessages();

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞
  function sendMessage() {
    const text = textInput.value.trim();
    if (!text) return;
    messages.push({ type: 'text', content: text });
    localStorage.setItem('chatMessages', JSON.stringify(messages));
    renderMessages();
    textInput.value = '';
  }

  sendBtn.addEventListener('click', sendMessage);

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Enter
  textInput.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ
  fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
      messages.push({ type: 'image', content: e.target.result });
      localStorage.setItem('chatMessages', JSON.stringify(messages));
      renderMessages();
      fileInput.value = '';
    };
    reader.readAsDataURL(file);
  });

</script>

</body>
</html>
